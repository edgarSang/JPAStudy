1. emptyDir 볼륨을 사용하여 fortune pod 생성해보고 curl 요청보내어 응답받아보기.
2. 볼륨을 사용하는 파드를 생성하고, 파드 내 MongoDB 데이터베이스에 도큐먼트를 추가해 퍼시스턴트 스토리지에 데이터쓰기 (find 명령으로 추가한 도큐먼트 확인)
3. 스토리지 클래스를 지정하지 않고 퍼시스턴트 볼륨 클레임 생성하기 (생성된 PVC 확인하기)


# 6 볼륨: 컨테이너에 디스크 스토리지 연결
 - 파드는 내부에 프로스ㅔ스가 실행되고 CPU, RAM 네트워크 인터페이스 등의 리소스를 공유하는 논리적 호스트와 유사
 - 프로세스가 디스크 공유 X
 - 파드 내부의 각 컨테이너는 고유한 파일시스템을 가짐, 파일시스템은 컨테이너 이미지에서 제공됨
 - 새로시작한 컨테이너는 이전에 실행했던 컨테이너에 씌여진 파일시스템의 어떤것도 볼수 x
 - 만약 실제 데이터를 가진 디렉터리를 보존하고 싶을 수 도있다. 쿠버에선 스토리지 볼륨을 정의 할 수 있다.
 - 스토리지 볼륨은 파드와 동일한 라이프 사이클을 가짐, 파드가 삭제되면 볼륨도 삭제됨.

#### 6.1 볼륨 소개
 - 볼륨은 파드스펙에서 정의된다.
 - 볼륨은 독립적 쿠버 OBJ가 아니므로 자체새성 삭제가 불가능
 - 각 컨테이너에서 파일시스템은 어느 경로에나 볼륨을 마운트할 수 있다.

#### 6.1.1 예제의 볼륨 설명
 - 리눅스에서 파일시스템을 파일 트리의 임의 경로에 마운트 할 수있다.
 - 이렇게 하면 마운트된 파일시스템의 내용은 마운트된 디렉터리에서 접근 가능하다.
 - 같은 볼륨을 두개의 컨테이너에 마운트하면 컨테이너는 동일한 파일로 동작 할 수 있다.
 - 책 경우에는 볼륨 두개를 컨테이너 세개에 마운트 한다.
 - 파드와 볼륨이 사라진 후에도 볼륨파일이 유지돼 새로운 볼륨으로 마운트 될 수 있다. 

#### 6.2.1. 사용 가능한 볼륨 유형 소개.
 - 볼륨 종류
     - emptyDir: 일시적인 데이터를 저장하는데 사용되는 간단한 빈 디렉터리
     - hostPath: 워커노드의 파일시스템을파드 디렉터리러 마운트 하는데 사용
     - gitRepo: 깃 레포지터리의 콘테츠를 체크아웃해 초기화한 볼륨이다.
     - nfs: NFS 공유를 파드에 마운트 한다.
     - gcePersistencDisk, awsElasticBlockStore,azureDisk 
 - 단일 파드는 동시에 여러 유형의 볼륨을 사용할 수 있으며, 각 컨테이너에 볼륨을 마운트하거나 마운트하지않을 수 있다.

#### 6.2 볼륨을 사용한 컨테이너 간 데이터 공유
#### 6.2.1. emptyDir 볼륨 사용
 - emptyDir 볼륨은 파일 파드에서 실행중인 컨테이너 간 파일을 공유할 때 유용하다.
 - 컨테이너의 파일시스템은 쓰기가 불가할 수도 있고, 마은트된 볼륨에 쓰는 것이 유일한 옵션일 수 있다.
```
docker build -t edgarsang/fortune .
docker images
docker push edgarsang/fortune
kubectl create -f fortune-pod.yaml
kubectl port-forward fortune 8080:80
```
 #### emptyDir 을 사용하기 위한 매체 지정하기
 - 볼륨으로 사용한 emptyDir은 파드를 호스팅 하는 워커노드의 실제 디스크에 생성되므로 노드 디스크가 어떤 유형인지에 따라 성능이 결정됐다.
 - 반면 쿠버에 emptyDir을 디스크가 아닌 메모리를 사용하는 tmpfs파일시스템으로 생성하도록 요청 할 수 있다.
 - 이 작업을 위해 다음과 같이 emptyDir의 medium을 memory로 지정한다.
 - emptyDir 볼륨은 가장 단순한 볼륨유형이지만, 다른유형들도 이 볼륨을 기반으로 한다.
 
#### 6.2.2 깃 리포지터리를 볼륨으로 사용하기
 - gitRepo  볼륨은 기본적으로 emptyDir 볼륨이며 파드가 시작되면 깃 리포지터리를 복제하고 특정 리비전을 체크아웃해 데이터로 채운다.
 - 
